(function($){"use strict";var MultiSelector=function(element,options){var $element=this.$element=$(element);this.options=$.extend({},$.fn.multiselector.defaults,options),this.$element.find("ul a").click(function(e){var checkbox=$(this).find("input[type=checkbox]").first();checkbox.length?(e.stopPropagation(),checkbox.prop("checked",!checkbox[0].checked)):$element.find("input[type=checkbox]").prop("checked",!1),$element.multiselector("update"),e.preventDefault()})};MultiSelector.prototype={constructor:MultiSelector,update:function(){var $el=this.$element,selected=$el.find("input[type=checkbox]:checked"),defaultValue=$el.find("ul>li:first-child>a").text(),$label=$($el.find("a > span:first-child")),multipleText=$el.data("multipleText")||this.options.multipleText,visibleItems=$el.data("visibleItems")||this.options.visibleItems,separator=$el.data("separator")||this.options.separator;0===selected.length?$label.text(defaultValue):1===selected.length?$label.text($(selected[0]).parent().text()):visibleItems>=selected.length?$label.text(selected.map(function(){return $(this).parent().text()}).get().join(separator)):$label.text(multipleText)}},$.fn.multiselector=function(option){return this.each(function(){var $this=$(this),data=$this.data("multiselector"),options="object"==typeof option&&option;data||$this.data("multiselector",data=new MultiSelector(this,options)),"update"===option&&data.update()})},$.fn.multiselector.defaults={multipleText:"Multiple Items",visibleItems:2,separator:", "},$.fn.multiselector.Constructor=MultiSelector,$(function(){$("body").on("mousedown.multiselector.data-api",'[data-provide="multiselector"] .dropdown-menu>li',function(e){var $selector=$(e.target);$selector.hasClass("multi-selector")||($selector=$selector.closest(".multi-selector")),$selector.multiselector("update")}),$(".multi-selector").multiselector("update")})})(window.jQuery);